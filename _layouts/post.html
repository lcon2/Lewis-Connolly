<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    {% include seo.html %}
    <link rel="stylesheet" href="{{ '/assets/css/styles.css' | relative_url }}">

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-KVG9646266"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-KVG9646266');
    </script>

</head>
<body class="post">
    <header>
        <div class="logo">
            <a href="{{ '/' | relative_url }}">
                <img src="{{ '/assets/images/logo.png' | relative_url }}" alt="Logo">
            </a>
        </div>
        <a href="https://buymeacoffee.com/lewisconnolly" class="beer-link" target="_blank" rel="noopener noreferrer" aria-label="Buy me a beer">
            <img src="{{ '/assets/images/beer.png' | relative_url }}" alt="Buy me a beer">
            <span class="beer-text" aria-hidden="true">Buy me a beer</span>
        </a>
    </header>
    <main>
        <article>
            <h2>{{ page.title }}</h2>
            <p class="post-meta" style="margin-bottom: 0;">
                {{ page.date | date: "%B %d, %Y" }} 
                    <span class="author-meta">
                        By <a href="{{ page.author_url | relative_url }}" class="author-link">{{ page.author }}</a>
                    </span>
                </p>
            <p class="post-meta" style="margin-top: 0;">
                Filed under:
                {% for category in page.categories %}
                    {% assign category_slug = category | slugify %}
                    <a href="{{ '/categories/' | append: category_slug | append: '/' | relative_url }}" class="category-pill">{{ category }}</a>
                {% endfor %}
            </p>
            <div>{{ content }}</div>
        </article>
        
        <!-- New Navigation Section -->
        <div class="post-navigation">
            <div class="previous-post">
                {% if page.previous %}
                <a href="{{ page.previous.url }}">
                    &larr; Previous: {{ page.previous.title }}
                </a>
                {% endif %}
            </div>
            <div class="next-post">
                {% if page.next %}
                <a href="{{ page.next.url }}">
                    Next: {{ page.next.title }} &rarr;
                </a>
                {% endif %}
            </div>
        </div>
        <!-- End of Navigation Section -->

    </main>
    <footer style="text-align: center; margin-top: 20px; width: 100%; border-top: 1px solid #ccc; padding: 10px 0;">
        <p>© Lewis Connolly. 2015 - <script>document.write(new Date().getFullYear());</script> All Rights Reserved ┃ Copyright</p>
    </footer>

    <script>
      (function () {
        var header = document.querySelector('.post header');
        if (!header) return;
        var beerLink = header.querySelector('.beer-link');
        var hideTimer = null;
        function onScroll() {
          var doc = document.documentElement;
          var scrollTop = doc.scrollTop || document.body.scrollTop || 0;
          var max = Math.max(1, doc.scrollHeight - doc.clientHeight);
          var ratio = scrollTop / max;
          if (ratio >= 0.6) {
            header.classList.add('is-beer-visible');
            header.classList.add('is-beer-placed');
          }
          if (ratio <= 0.1 && header.classList.contains('is-beer-visible')) {
            if (hideTimer) clearTimeout(hideTimer);
            hideTimer = setTimeout(function () {
              var docNow = document.documentElement;
              var scrollNow = docNow.scrollTop || document.body.scrollTop || 0;
              var maxNow = Math.max(1, docNow.scrollHeight - docNow.clientHeight);
              var ratioNow = scrollNow / maxNow;
              if (ratioNow <= 0.1) {
                if (beerLink && beerLink.matches(':hover')) {
                  return;
                }
                header.classList.remove('is-beer-visible');
              }
            }, 2000);
          } else if (hideTimer) {
            clearTimeout(hideTimer);
            hideTimer = null;
          }
        }
        window.addEventListener('scroll', onScroll, { passive: true });
        window.addEventListener('resize', onScroll);
        onScroll();
      })();
    </script>
    <script src="{{ '/assets/js/image-manifest.js' | relative_url }}"></script>
    <script src="{{ '/assets/js/image-lazyload.js' | relative_url }}"></script>
    <script src="{{ '/assets/js/summary-tooltips.js' | relative_url }}"></script>
</body>
</html>
